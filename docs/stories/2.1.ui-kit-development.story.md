# Story 2.1: UI Kit Foundation Refresh

## Status
Ready for Review

## Story
**As a** frontend engineer partnering with design,
**I want** a consolidated UI component kit powered by refreshed tokens
**so that** every screen can reuse consistent, accessible primitives while the global layout evolves.

## Acceptance Criteria
1. Core primitives (`Button`, `Input`, `Select`, `Card`, `Table`, `Tabs`, `Modal`, `Badge`) live under `src/components/ui/`, consume Story 1.2 tokens, expose props for size/state, and support light/dark contrast requirements. [Source: docs/uiux/design-tokens.md]
2. Components provide variant coverage (default, hover, focus-visible, disabled, loading) and align to DSV color rules (top bar pills, status chips, CTA buttons). [Source: docs/front-end.md#1-brand-guidelines]
3. Documentation/preview (`/ui-kit` route or Storybook) showcases each primitive with props tables, do/donâ€™t notes, and links to design references; usage guidance stored in `docs/uiux/ui-kit-notes.md`. [Source: docs/uiux-Implementation.md]
4. At least three existing modules (Material Request form, Procurement dashboard, PR dashboard) are refactored to consume the shared components, demonstrating drop-in consistency. [Source: docs/uiux/ui-gap-checklist.csv]
5. QA evidence lists lint output and manual accessibility checks (keyboard navigation, contrast) recorded in Dev Notes. [Source: docs/front-end.md#5-accessibility]

## Tasks / Subtasks
- [x] Task 1: Audit & scaffold UI kit (AC: 1)
  - [x] Subtask 1.1: Inventory existing ad-hoc components and identify candidates to refactor into shared primitives. [Source: docs/uiux/ui-audit-report.md]
  - [x] Subtask 1.2: Create/update `src/components/ui/` primitives (Button, Input, Select, Card, Table, Tabs, Modal, Badge), ensuring token usage. [Source: docs/uiux/design-tokens.md]
- [x] Task 2: Apply tokens and states (AC: 1, 2)
  - [x] Subtask 2.1: Implement variant styling (primary, secondary, ghost, danger) and state transitions for buttons and nav items. [Source: docs/front-end.md#2-global-layout]
  - [x] Subtask 2.2: Add accessibility hooks (aria props, focus-visible outlines, keyboard interaction) for tabs, modals, and select. [Source: docs/front-end.md#5-accessibility]
- [x] Task 3: Integrate exemplar screens (AC: 4)
  - [x] Subtask 3.1: Refactor Material Request form to consume UI kit Inputs/Select/Buttons while maintaining functionality. [Source: docs/uiux/ui-gap-checklist.csv]
  - [x] Subtask 3.2: Update Procurement and PR dashboards to use Cards, Tables, Buttons, and status chips from the kit. [Source: docs/uiux/ui-audit-report.md]
- [x] Task 4: Documentation & preview (AC: 3)
  - [x] Subtask 4.1: Refresh `/ui-kit` showcase (or Storybook) with component examples, prop controls, and responsive viewports. [Source: docs/uiux-Implementation.md]
  - [x] Subtask 4.2: Update `docs/uiux/ui-kit-notes.md` with component API summaries, state guidance, and migration checklist. [Source: docs/uiux/ui-audit-report.md]
- [x] Task 5: Validation (AC: 5)
  - [x] Subtask 5.1: Run `npm run lint`; document any inherited failures (e.g., `@typescript-eslint/no-require-imports`).
  - [x] Subtask 5.2: Record manual accessibility checks (keyboard traversal, contrast) for kit components and exemplar screens in Dev Notes.

## Dev Notes

### Previous Story Insights
- Story 1.2 refreshes tokens; the kit must exclusively rely on those vars to prevent palette drift. [Source: docs/stories/1.2.design-tokens.story.md]
- Story 1.3 will reference kit components in wireframe annotations; ensure naming and states are clear for designers. [Source: docs/uiux-Implementation.md]

### Data Models
- None; UI kit focuses on presentation and state, not data storage.

### API Specifications
- Not applicable.

### Component Specifications
- Components should integrate smoothly with the AppLayout (Story 2.2) and support roles/responsive behavior noted in the brief. [Source: docs/front-end.md#2-global-layout; docs/uiux/ui-gap-checklist.csv]

### File Locations
- `src/components/ui/` for primitives, `src/components/layout/` for shell integration; consumer modules under `src/components/` should import from the kit.

### Testing Requirements
- Manual checks plus lint; optional Jest/RTL tests for interactive components if time allows.

### Technical Constraints
- Meet WCAG AA; ensure tokens produce minimum 4.5:1 contrast for text and 3:1 for large/iconography.

### Project Structure Notes
- No restructure required; ensure exports from `src/components/ui/index.ts` stay up to date.

## Testing

### Test File Location
- Optional: `src/__tests__/components/` (e.g., Button or Tabs interaction tests) if added.

### Test Standards
- Lint run + manual accessibility/contrast checks logged in Dev Notes.

### Testing Frameworks and Patterns
- Jest + React Testing Library for any automated coverage.

### Specific Testing Requirements
- Capture screenshots of refactored screens (before/after) showing kit adoption.

## Change Log
| Date       | Version | Description                      | Author |
|------------|---------|----------------------------------|--------|
| 2025-01-24 | 0.1     | Story redrafted for new UI kit scope | Bob    |
| 2025-01-24 | 0.2     | UI kit primitives delivered and exemplar pages refactored | James |

## Dev Agent Record

### Agent Model Used
OpenAI GPT-5 (Codex CLI)

### Debug Log References
- `npm run lint` (fails: existing `@typescript-eslint/no-require-imports` rule in `jest.config.js`; warnings unchanged).
- Manual accessibility checks (keyboard, focus-visible, contrast) noted in docs/uiux/ui-kit-notes.md.

### Completion Notes List
- Added shared UI primitives (`Button`, `Input`, `Select`, `Badge`, `Card`, `Table`, `Tabs`, `Modal`) with token-based styling.
- Refactored Material Request, Procurement, and PR dashboards to consume the kit.
- Updated `/ui-kit` showcase with component demos and refreshed documentation in `docs/uiux/ui-kit-notes.md`.
- Recorded lint and accessibility validation outcomes.

### File List
- `src/components/ui/Button.tsx`
- `src/components/ui/Input.tsx`
- `src/components/ui/Select.tsx`
- `src/components/ui/Badge.tsx`
- `src/components/ui/Card.tsx`
- `src/components/ui/Table.tsx`
- `src/components/ui/Tabs.tsx`
- `src/components/ui/Modal.tsx`
- `src/components/ui/index.ts`
- `src/app/ui-kit/page.tsx`
- `src/components/MaterialRequestForm.tsx`
- `src/components/ProcurementDashboard.tsx`
- `src/components/PRDashboard.tsx`
- `docs/uiux/ui-kit-notes.md`
- `docs/stories/2.1.ui-kit-development.story.md`

## QA Results
_To be populated by QA Agent_
